.container {
  margin: 0 auto;
  padding: 0 $spacing-grid;
  max-width: $screen-lg-min;
}

.grid {
  display: flex;
  flex-wrap: wrap;
  margin: 0 $spacing-grid $spacing-grid;

  &:last-child { margin: 0 $spacing-grid; }

  /**
   * Grid directly below the container or panel-body should
   * have negative margins to bring them back into line.
   */
  .container &,
  .panel-body & {
    margin: 0 -#{$spacing-grid} $spacing-grid;

    &:last-child { margin: 0 -#{$spacing-grid}; }
  }

  > .grid-cell {
    flex: 1;
    padding: 0 ($spacing-grid / 2);

    &:first-child { padding-left: $spacing-grid; }
    &:last-child  { padding-right: $spacing-grid; }
  }

  /**
   * Guttered
   */

  &.grid-no-gutters {
    margin: 0;

    &:last-child { margin: 0; }

    > .grid-cell {
      padding: 0;
    }
  }

  /**
   * Cell shrinker
   */

  > .grid-shrink {
    flex-basis: auto;
    flex-shrink: 1;
    flex-grow: 0;
  }

  /**
   * Vertical Alignment
   */

  // All cells
  &.grid-top    { align-items: flex-start; }
  &.grid-middle { align-items: center; }
  &.grid-bottom { align-items: flex-end; }

  // Per cell
  > .grid-cell {
    &.grid-top    { align-self: flex-start; }
    &.grid-middle { align-self: center; }
    &.grid-bottom { align-self: flex-end; }
  }

  /**
   * Responsive and Size modifiers
   */

  //
  @mixin makeResponsiveClasses($size) {
    @include screenMoreThan($size) {
      > .grid-cell {
        &.grid-#{$size}-25 { width: 25%; flex: none; }
        &.grid-#{$size}-50 { width: 50%; flex: none; }
        &.grid-#{$size}-75 { width: 75%; flex: none; }

        &.grid-#{$size}-33 { width: 33.3333%; flex: none; }
        &.grid-#{$size}-66 { width: 66.6666%; flex: none; }
      }

      &.grid-#{$size}-fit > .grid-cell { flex: 1; }
      &.grid-#{$size}-full > .grid-cell { @include fullWidth(); }
    }
  }

  //
  @mixin fullWidth() {
    padding: 0 $spacing-grid $spacing-grid;
    flex: 0 0 100%;

    &:last-child { padding-bottom: 0; }
  }

  // For small screen back to 100% width
  @include screenLessThan(sm) {
    > .grid-cell { @include fullWidth(); }
  }

  @include makeResponsiveClasses(sm);
  @include makeResponsiveClasses(md);
  @include makeResponsiveClasses(lg);
}
